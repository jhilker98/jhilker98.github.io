---
import type { GetStaticPaths } from "astro";
import type { GetStaticPaths } from "astro";
//import BaseLayout from "@layouts/BaseLayout.astro";
//import type { Series } from "@types";
import { getCollection } from "astro:content";
import type BlogPost from "@content/config.ts";
//import { findPostsInSeries } from "@lib/blog";
import { slugifyUrl } from "@lib/utils.ts";
import BaseLayout from "@layouts/BaseLayout.astro";

export const getStaticPaths = (async () => {
  const allPosts: BlogPost[] = await getCollection("blog");
  const seriesNames = allPosts
    .filter((post) => post.data.series !== undefined)
    .map((post) => post.data.series.name);
  return seriesNames.map((series) => {
    return {
      params: { series: slugifyUrl(series) },
      props: { series: slugifyUrl(series) },
    };
  });
}) satisfies GetStaticPaths;

const { series } = Astro.params;
---

<BaseLayout title={series} description="Post Description">
  <article class="p-2 prose prose-neutral dark:prose-invert"></article>
</BaseLayout>
