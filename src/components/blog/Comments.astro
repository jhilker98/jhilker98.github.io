---

---

<script>
  function getGiscusTheme() {
    const darkMode = localStorage.getItem("darkMode");
    const giscusTheme =
      darkMode === undefined || darkMode === "true" ? "dark" : "light";
    return giscusTheme;
  }

  function setGiscusTheme() {
    function sendMessage(message) {
      const iframe = document.querySelector("iframe.giscus-frame");
      if (!iframe) return;
      iframe.contentWindow.postMessage(
        { giscus: message },
        "https://giscus.app",
      );
    }
    sendMessage({
      setConfig: {
        theme: getGiscusTheme(),
      },
    });
  }

  document.addEventListener("DOMContentLoaded", function () {
    const giscusAttributes = {
      src: "https://giscus.app/client.js",
      "data-repo": "jhilker98/jhilker98.github.io",
      "data-repo-id": "R_kgDOHxig_Q",
      "data-category": "Comments",
      "data-category-id": "DIC_kwDOHxig_c4CSrzq",
      "data-mapping": "title",
      "data-reactions-enabled": "1",
      "data-strict": "0",
      "data-input-position": "top",
      "data-emit-metadata": "0",
      "data-theme": getGiscusTheme(),
      "data-lang": "en",
      crossorigin: "anonymous",
      async: "",
    };

    // Dynamically create script tag
    const giscusScript = document.createElement("script");
    Object.entries(giscusAttributes).forEach(([key, value]) =>
      giscusScript.setAttribute(key, value),
    );
    const article = document.querySelector("article");
    article.appendChild(giscusScript);

    // Update giscus theme when theme switcher is clicked
    const toggle = document.querySelector(
      "button[aria-label='Toggle Dark Mode']",
    );
    if (toggle) {
      toggle.addEventListener("click", setGiscusTheme);
    }
  });
</script>
